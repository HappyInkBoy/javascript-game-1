<!DOCTYPE html>
<html>
<body>

<h1>My first adventure game</h1>

<p>Alex.</p>
<script>
// Alexandre Cornu
// 2020/2/1

var maze = [
  ["â– ","â– ","â– ","â– ","â– ","â– ","â– ","â– ","â– "],
  ["â– ","S","â– ","â– ","â– ","â– ","â– ","ðŸ•®","â– "],
  ["â– "," "," "," "," "," "," "," ","â– "],
  ["â– ","â– "," ","â– ","âš”","â– ","â– "," ","â– "],
  ["â– "," "," ","â– "," ","â– ","â– "," ","â– "],
  ["â– "," ","â– ","â– ","â– ","e","B"," ","â– "],
  ["â– "," ","â– ","â– ","â– ","â– ","â– "," ","â– "],
  ["â– "," ","N","â– ","K"," "," "," ","â– "],
  ["â– ","â– ","â– ","â– ","â– ","â– ","â– ","â– ","â– "],
]
var visited = [ 
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false],
   [false,false,false,false,false,false,false,false,false]
]
//B: To enter you must have battled the 2 Guardians
//âš”: you have found a SWORD!
//N: You must have the Sword to fight this Ninja, if not, you die.
//K: you must have a magic Book to fight this Kraken, if not, you die.
//ðŸ•®: you have found a MAGIC BOOK!
//S: START!!
//e: you have beat this game congratulation!!
x = 1
y = 1
hasMagicBook = false
hasSword = false
function showMaze (){
  var i; var j
  for (i = 0; i < maze.length; i++) {
    var line = ""
    for (j = 0; j < maze[i].length; j++) {
      if (visited[i][j]) {
        var cell = maze[i][j]
        if (cell == " ") {
          cell = "ðŸ¦¶"
        }
        line = line+cell
      }
      else {
        line = line+ " "
      }
    }
    console.log (line)
  }
}
function showMaze2 (){
  var i; var j
  for (i = 0; i < maze.length; i++) {
    var line = ""
    for (j = 0; j < maze[i].length; j++) {
      if (visited[i][j]) {
        var cell = maze[i][j]
        if (cell == " ") {
          cell = "ðŸ¦¶"
        }
        line = line+cell
      }
      else {
        line = line+ " "
      }
    }
    createTable([["row 1, cell 1", "row 1, cell 2"], ["row 2, cell 1", "row 2, cell 2"]]);
    console.log (line)
  }
}
  function createTable(tableData) {
  var table = document.createElement('table');
  var tableBody = document.createElement('tbody');

  tableData.forEach(function(rowData) {
    var row = document.createElement('tr');

    rowData.forEach(function(cellData) {
      var cell = document.createElement('td');
      cell.appendChild(document.createTextNode(cellData));
      row.appendChild(cell);
    });

    tableBody.appendChild(row);
  });

  table.appendChild(tableBody);
  document.body.appendChild(table);
}
document.onkeydown = function(event){
  console.log(event)
  if ( event.key == "ArrowUp"){
    console.log ("you are going up")
    newY = y - 1
    newX = x 
  }
  if (event.key == "ArrowDown"){
    console.log ("you are going down")
    newY = y + 1
    newX = x
  }
  if (event.key == "ArrowLeft"){
    console.log ("you are going left")
    newX = x - 1
    newY = y
  }
  if (event.key == "ArrowRight"){
    console.log ("you are going right")
    newX = x + 1
    newY = y
  }
  visited[newY][newX] = true

  if (maze [newY][newX] == "â– "){
    console.log ("you hit a wall")
    showMaze ()
    return
  }
  x = newX
  y = newY
  if (maze [y][x] == "âš”"){
    console.log ("you found a SWORD")
    hasSword = true 
    maze [y][x] = " "
  }
  console.log (y,x)
  if (maze [y][x] == "N"){
    console.log ("NINJA FIGHT!")
    if (hasSword){
      console.log ("ðŸ•®you win the fight!âš”")
    } else{
      console.log ("you're dead")
      showMaze ()
      process.exit(1);
    }
  }
  if (maze [y][x] == "ðŸ•®"){
    console.log ("you found a MAGICBOOK")
    hasMagicBook = true
    maze [y][x] = " "
  }
  if (maze [y][x] == "K"){
    console.log ("RELEASE THE KRAKEN!")
    if (hasMagicBook){
      console.log ("ðŸ•®you win the magic fight!âš”")
    } else{
      console.log ("ðŸ•®you're deadâš”")
      showMaze ()
      process.exit(1);
    }
  }
  visited [y][x] = true
  showMaze2 ()
}
</script>

</body>
</html>

